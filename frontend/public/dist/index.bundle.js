(()=>{"use strict";var e={59:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"dwg-chatbox{--input-box-height: 35px;background-color:#c8c8c8;color:#000;display:block;height:100%;width:100%}dwg-chatbox #chat-container{display:flex;flex-flow:column nowrap;height:calc(100% - var(--input-box-height));width:100%}dwg-chatbox #chat-container :first-child{margin-top:auto}dwg-chatbox #chat-container>.color-gray{color:#646464}dwg-chatbox #input-container{--margin: 8px;--send-button-width: 70px;display:flex;flex-flow:row nowrap;height:var(--input-box-height);width:100%}dwg-chatbox #input-container>*{box-sizing:border-box;height:calc(100% - var(--margin));margin-top:var(--margin)}dwg-chatbox #input-container #chat-input{width:calc(100% - var(--send-button-width))}dwg-chatbox #input-container #send-chat{width:var(--send-button-width)}",""]);const a=s},630:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".dwg-element:not(.parsed){display:none}",""]);const a=s},732:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"dwg-lobby{--name-header-height: 30px;--buttons-height: 50px;--chat-height: 200px;background-color:#143c78;display:flex;flex-flow:column nowrap}dwg-lobby #name-header{background-color:#001e3c;box-sizing:border-box;display:block;font-size:18px;height:var(--name-header-height);line-height:var(--name-header-height);max-height:var(--name-header-height);min-height:var(--name-header-height);padding-left:1.5em;width:100%}dwg-lobby #buttons{background-color:#0a3264;border-bottom:2px solid #000;box-sizing:border-box;display:flex;flex-flow:row nowrap;gap:8px;height:var(--buttons-height);max-height:var(--buttons-height);min-height:var(--buttons-height);width:100%}dwg-lobby #buttons>button{background-color:rgba(0,0,0,0);border:none;border-radius:16px;color:#fff;font-size:20px;padding:8px;transition:background-color 200ms,border-radius 200ms}dwg-lobby #buttons>button:hover:not(:disabled){background-color:rgba(50,100,200,.2)}dwg-lobby #buttons>button:active:not(:disabled){background-color:rgba(70,140,250,.4);border-radius:0px}dwg-lobby #buttons>button:disabled{background-color:rgba(150,150,150,.6);border-radius:8px;transition:none}dwg-lobby #horizontal-container{display:flex;flex-flow:row nowrap;flex:1 0 0;width:100%}dwg-lobby #horizontal-container #vertical-container{display:flex;flex-flow:column nowrap;flex:1 0 0;height:100%}dwg-lobby #horizontal-container #vertical-container #room-container{box-sizing:border-box;flex:1 0 0;padding:12px}dwg-lobby #horizontal-container #vertical-container #chatbox{box-sizing:border-box;height:var(--chat-height);max-height:var(--chat-height);min-height:var(--chat-height);padding:12px}dwg-lobby #horizontal-container #lobby-users{background-color:#0a1e32;box-sizing:border-box;height:100%;padding:8px;width:250px}",""]);const a=s},11:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"dwg-lobby-connector{background-color:rgba(120,120,120,.8);height:100%;left:0px;position:absolute;top:0px;width:100%;z-index:2}dwg-lobby-connector.hide{display:none}dwg-lobby-connector #card{background-color:#dcdcdc;color:#000;height:200px;left:calc(50% - 100px);padding:16px;position:relative;top:calc(50% - 150px);width:300px}dwg-lobby-connector #card #nickname{font-size:24px;margin-top:20px;width:290px}dwg-lobby-connector #card #connect-button{font-size:24px;margin-top:50px;width:290px}",""]);const a=s},991:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"",""]);const a=s},381:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"dwg-lobby-room-selector{display:block}",""]);const a=s},391:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"dwg-lobby-users{display:flex;flex-flow:column nowrap}dwg-lobby-users #header{height:36px}dwg-lobby-users #header #refresh-button{background-color:rgba(0,0,0,0);border:none;border-radius:6px;height:30px;margin:0px;padding:0px;position:relative;top:3px;user-select:none;width:30px}dwg-lobby-users #header #refresh-button:hover{background-color:rgba(180,180,180,.15)}dwg-lobby-users #header #refresh-button:active{background-color:rgba(180,180,180,.3)}dwg-lobby-users #header #refresh-button #refresh-img{filter:invert(1);left:3px;position:absolute;top:3px;user-select:none}dwg-lobby-users #user-container{flex:1 0 0}",""]);const a=s},706:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"dwg-page-home{--margin-size: 16px;--height: calc(100vh - 2 * var(--margin-size));--width: calc(100% - 2 * var(--margin-size));background-color:#05285a;display:block;height:var(--height);max-height:var(--height);max-width:var(--width);min-height:var(--height);min-width:var(--width);padding:var(--margin-size);width:var(--width)}dwg-page-home #lobby{height:100%;width:100%}",""]);const a=s},197:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"",""]);const a=s},99:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,'body{background-color:#000;color:#fff;font-family:"Fira Sans",sans-serif;margin:0;min-height:100vh;min-width:100%;padding:0}',""]);const a=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);o&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:e=>{e.exports=function(e){return e[1]}},91:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},379:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],d=o.base?c[0]+o.base:c[0],l=i[d]||0,h="".concat(d," ").concat(l);i[d]=l+1;var u=n(h),b={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(b);else{var g=r(b,o);o.byIndex=a,t.splice(a,0,{identifier:h,updater:g,references:1})}s.push(h)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var c=o(e,r),d=0;d<i.length;d++){var l=n(i[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},569:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},861:(e,t,n)=>{e.exports=n.p+"8787734a93d781fa44ad.png"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="dist/",n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),o=n(795),r=n.n(o),i=n(569),s=n.n(i),a=n(565),c=n.n(a),d=n(216),l=n.n(d),h=n(589),u=n.n(h),b=n(99),g={};g.styleTagTransform=u(),g.setAttributes=c(),g.insert=s().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),t()(b.Z,g),b.Z&&b.Z.locals&&b.Z.locals;var m=n(197),p={};function f(e,t,n={}){const o=Object.assign({loading_text:void 0,disable_button:!0,re_enable_button:!0},n);e.addEventListener("click",(()=>{o.disable_button&&(e.disabled=!0),console.log("1",e.innerHTML);const n=e.innerText;function r(t,o){console.log("3",e.innerHTML),e.innerText="string"==typeof t?t:n,console.log("4",e.innerHTML),o&&(e.disabled=!1)}console.log("2",e.innerHTML),r(o.loading_text);const i=t();i instanceof Promise?i.then((e=>{r(e,o.re_enable_button)})):r(i,o.re_enable_button)}))}p.styleTagTransform=u(),p.setAttributes=c(),p.insert=s().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=l(),t()(m.Z,p),m.Z&&m.Z.locals&&m.Z.locals;var y=n(630),v={};v.styleTagTransform=u(),v.setAttributes=c(),v.insert=s().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=l(),t()(y.Z,v),y.Z&&y.Z.locals&&y.Z.locals;class x extends HTMLElement{constructor(){super(...arguments),this.fully_parsed=!1,this.elsMetadata=[]}connectedCallback(){return e=this,t=void 0,o=function*(){this.classList.add("dwg-element"),this.innerHTML=this.htmlString,yield function(e,t=300){const n=o=>{e()?o():setTimeout((()=>n(o)),t)};return new Promise(n)}(this.elementsParsed.bind(this)),this.parsedCallback(),this.classList.add("parsed"),this.fully_parsed=!0},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}));var e,t,n,o}elementsParsed(){let e=!0;for(const t of this.elsMetadata){let n=t.found_element?this[t.name]:null;t.found_element||(n=this.querySelector(`#${t.element_id}`),n&&(this[t.name]=n,t.found_element=!0)),t.found_element?n instanceof x&&(n.fully_parsed||(e=!1)):e=!1}return e}parsedCallback(){}configureElement(e,t){t||(t=e.replace(/_/g,"-")),this.elsMetadata.push({element_id:t,name:e})}}function w(e,t){return n=this,o=void 0,i=function*(){const n=t instanceof File,o=n?t.type:"application/json",r=n?t.name:void 0,i=n?t:JSON.stringify(t);try{const t=yield fetch(function(e){return`/api/${e}/`}(e),{method:"POST",headers:{"Content-Type":o,"X-File-Name":r},body:i});return yield t.json()}catch(e){console.log(e)}return{success:!1,error_message:"Server error; please report this bug."}},new((r=void 0)||(r=Promise))((function(e,t){function s(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}c((i=i.apply(n,o||[])).next())}));var n,o,r,i}var _=n(381),k={};function E(e){return`<dwg-lobby-room-selector room-name="${e.room_name}"></dwg-lobby-room-selector>`}k.styleTagTransform=u(),k.setAttributes=c(),k.insert=s().bind(null,"head"),k.domAPI=r(),k.insertStyleElement=l(),t()(_.Z,k),_.Z&&_.Z.locals&&_.Z.locals,customElements.define("dwg-lobby-room-selector",class extends x{constructor(){super(),this.htmlString='<span id="room-name">Hello from lobby-room-selector!</span> ',this.configureElement("room_name")}parsedCallback(){var e,t;this.room_name.innerHTML=null!==(t=null===(e=this.attributes.getNamedItem("room-name"))||void 0===e?void 0:e.value)&&void 0!==t?t:"- unknown -"}});var T=n(732),Z={};Z.styleTagTransform=u(),Z.setAttributes=c(),Z.insert=s().bind(null,"head"),Z.domAPI=r(),Z.insertStyleElement=l(),t()(T.Z,Z),T.Z&&T.Z.locals&&T.Z.locals;var C=n(59),S={};S.styleTagTransform=u(),S.setAttributes=c(),S.insert=s().bind(null,"head"),S.domAPI=r(),S.insertStyleElement=l(),t()(C.Z,S),C.Z&&C.Z.locals&&C.Z.locals,customElements.define("dwg-chatbox",class extends x{constructor(){super(),this.htmlString='<div id="chat-container"></div> <div id="input-container"> <input id="chat-input" placeholder="Chat with the entire lobby"> <button id="send-chat">Send</button> </div>',this.configureElement("chat_container"),this.configureElement("chat_input"),this.configureElement("send_chat")}parsedCallback(){f(this.send_chat,(()=>{this.sendChat()})),this.chat_input.addEventListener("keyup",(e=>{"Enter"===e.key&&this.sendChat()}))}addChat(e){const t="server"===e.sender||"gray"===e.color?'<div class="color-gray">':"<div>",n=e.sender&&"server"!==e.sender?`${e.sender}: `:"";this.chat_container.innerHTML+=`${t}${n}${e.message}</div>`}sendChat(){if(this.inputEmpty())return;const e=new CustomEvent("chat_sent",{detail:this.getInput()});this.dispatchEvent(e)}inputEmpty(){return!this.chat_input.value}getInput(){const e={message:this.chat_input.value};return this.chat_input.value="",e}});var L=n(91),M=n.n(L),A=new URL(n(861),n.b);const I='<div id="header"> <button id="refresh-button"> <img id="refresh-img" src="'+M()(A)+'" alt="refresh" draggable="false"> </button> </div> <div id="user-container"></div>';var P=n(391),$={};$.styleTagTransform=u(),$.setAttributes=c(),$.insert=s().bind(null,"head"),$.domAPI=r(),$.insertStyleElement=l(),t()(P.Z,$),P.Z&&P.Z.locals&&P.Z.locals;customElements.define("dwg-lobby-users",class extends x{constructor(){super(),this.htmlString=I,this.configureElement("refresh_button"),this.configureElement("user_container")}parsedCallback(){f(this.refresh_button,(()=>{this.refreshUsers()}),{}),this.refreshUsers()}refreshUsers(){return e=this,t=void 0,o=function*(){this.user_container.innerHTML=" ... loading";const e=yield w("lobby/users/get","");if(e.success)for(const t of e.result)this.addUser(t);else this.user_container.innerHTML=`Error loading users: ${e.error_message}`},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}));var e,t,n,o}addUser(e){this.user_container.innerHTML+=`<div class="lobby-user">${e.nickname} (${e.client_id})</div>`}});var z=n(991),H={};H.styleTagTransform=u(),H.setAttributes=c(),H.insert=s().bind(null,"head"),H.domAPI=r(),H.insertStyleElement=l(),t()(z.Z,H),z.Z&&z.Z.locals&&z.Z.locals,customElements.define("dwg-lobby-room",class extends x{constructor(){super(),this.htmlString='<div id="example">Hello from lobby-room!</div> ',this.configureElement("example","example")}parsedCallback(){console.log("DwgLobbyRoom parsed!")}});var N=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};customElements.define("dwg-lobby",class extends x{constructor(){super(),this.connection_metadata={nickname:"Anonymous"},this.connection_lost=new Event("connection_lost"),this.htmlString='<span id="name-header"></span> <span id="buttons"> <button id="refresh-lobby-button">Refresh</button> <button id="create-room-button">Create Room</button> </span> <span id="horizontal-container"> <span id="vertical-container"> <div id="room-container"></div> <dwg-chatbox id="chatbox"></dwg-chatbox> </span> <dwg-lobby-users id="lobby-users"></dwg-lobby-users> </span>',this.configureElement("name_header"),this.configureElement("refresh_lobby_button"),this.configureElement("create_room_button"),this.configureElement("room_container"),this.configureElement("chatbox"),this.configureElement("lobby_users")}parsedCallback(){f(this.refresh_lobby_button,(()=>N(this,void 0,void 0,(function*(){yield this.refreshLobby()})))),f(this.create_room_button,(()=>N(this,void 0,void 0,(function*(){return yield w(`lobby/rooms/create/${this.connection_metadata.client_id}`,""),"Room Created"}))),{loading_text:"Creating Room ...",re_enable_button:!1}),this.chatbox.addEventListener("chat_sent",(e=>{var t;let n=!1;try{const o=e.detail;this.socketActive()&&(this.socket.send(this.createMessage(null!==(t=o.sender)&&void 0!==t?t:`client-${this.connection_metadata.client_id}`,"lobby-chat",o.message,o.color)),n=!0),n?this.chatbox.addChat(Object.assign(Object.assign({},o),{sender:this.connection_metadata.client_id.toString()})):this.chatbox.addChat({message:`Message unable to be sent: "${o.message}"`,color:"gray"})}catch(e){this.chatbox.addChat({message:"Error trying to send message",color:"gray"})}})),this.refreshLobby()}setSocket(e){this.socket&&this.socket.close(3e3,"opening new connection"),this.socket=e,this.socket.addEventListener("message",(e=>{try{const t=JSON.parse(e.data);this.handleMessage(t)}catch(t){console.log("Error parsing message: ",e,t)}}))}refreshLobby(){return N(this,void 0,void 0,(function*(){this.room_container.innerHTML=" ... loading";const e=yield w("lobby/rooms/get","");if(e.success){let t="";for(const n of e.result)t+=E(n);this.room_container.innerHTML=t}else this.room_container.innerHTML=`Error loading rooms: ${e.error_message}`}))}handleMessage(e){if(this.socketActive())switch(console.log(e),e.kind){case"lobby-you-joined":const t=parseInt(e.data);t?(this.connection_metadata.client_id=t,this.setNickname(e.content),this.chatbox.addChat({message:`You (${this.connection_metadata.nickname}) joined lobby with client id ${t}`,sender:"server"}),this.socket.send(this.createMessage(`client-${t}`,"lobby-join",this.connection_metadata.nickname,`${t}`))):(this.socket.close(3001,"you-joined-lobby message did not return properly formed client id"),this.dispatchEvent(this.connection_lost));break;case"lobby-join":const n=parseInt(e.data);n&&this.chatbox.addChat({message:`${e.content} joined lobby with client id ${n}`,sender:"server"});break;case"lobby-left":const o=parseInt(e.data);o&&this.chatbox.addChat({message:`${e.content} (client id ${o}) left lobby`,sender:"server"});break;case"lobby-chat":const r=parseInt(e.sender.replace("client-",""));r&&this.chatbox.addChat({message:e.content,sender:r.toString()});default:console.log("Unknown message type",e.kind,"from",e.sender)}}socketActive(){return!!this.socket&&this.socket.readyState==WebSocket.OPEN}createMessage(e,t,n,o){return JSON.stringify({sender:e,kind:t,content:n,data:o})}setNickname(e){this.connection_metadata.nickname=e,this.name_header.innerText=e}});var j=n(11),O={};O.styleTagTransform=u(),O.setAttributes=c(),O.insert=s().bind(null,"head"),O.domAPI=r(),O.insertStyleElement=l(),t()(j.Z,O),j.Z&&j.Z.locals&&j.Z.locals,customElements.define("dwg-lobby-connector",class extends x{constructor(){super(),this.submitted=new Event("submitted"),this.htmlString='<div id="card"> <input id="nickname" placeholder="Nickname"> <button id="connect-button">Connect to Lobby</button> <div id="status-message"></div> </div> ',this.configureElement("card"),this.configureElement("nickname"),this.configureElement("connect_button"),this.configureElement("status_message")}parsedCallback(){this.connect_button.disabled=!0,this.nickname.addEventListener("keyup",(e=>{const t=this.validName(this.nickname.value);this.connect_button.disabled=!t,t&&"Enter"===e.key&&this.dispatchEvent(this.submitted)})),f(this.connect_button,(()=>(this.dispatchEvent(this.submitted),"Connecting ...")),{re_enable_button:!1})}validName(e){return!!e.length}});var U=n(706),R={};R.styleTagTransform=u(),R.setAttributes=c(),R.insert=s().bind(null,"head"),R.domAPI=r(),R.insertStyleElement=l(),t()(U.Z,R),U.Z&&U.Z.locals&&U.Z.locals,customElements.define("dwg-page-home",class extends x{constructor(){super(),this.htmlString='<dwg-lobby id="lobby"></dwg-lobby> <dwg-lobby-connector id="lobby-connector"></dwg-lobby-connector>',this.configureElement("lobby"),this.configureElement("lobby_connector")}parsedCallback(){this.lobby_connector.addEventListener("submitted",(()=>{const e=this.lobby_connector.nickname.value,t=new WebSocket(`ws://127.0.0.1:6807/api/lobby/connect/${e}`);t.addEventListener("error",(e=>{console.log(e),this.tryConnectionAgain("Could not connect. Check your connection and try again.")})),t.addEventListener("open",(()=>{this.lobby.setSocket(t),this.lobby.connection_metadata.nickname=e,this.lobby.name_header.innerText=e,this.lobby_connector.classList.add("hide")}))})),this.lobby.addEventListener("connection_lost",(()=>{this.tryConnectionAgain("Connection was lost. Check your connection and try again.")}))}tryConnectionAgain(e){this.lobby_connector.classList.remove("hide"),this.lobby_connector.status_message.innerText=e,this.lobby_connector.connect_button.disabled=!1,this.lobby_connector.connect_button.innerText="Connect to Lobby"}})})()})();